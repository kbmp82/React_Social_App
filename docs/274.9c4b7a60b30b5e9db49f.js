"use strict";(self.webpackChunkreact_social_app=self.webpackChunkreact_social_app||[]).push([[274],{274:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a(294),r=a(983),c=a(625),l=a(861),n=a(847);function o(){const e=(0,s.useContext)(r.Z),[t,a]=(0,c.x)({searchTerm:"",results:[],show:"neither",requestCount:0});function o(t){"Escape"==t.key&&e({type:"triggerSearch",value:!1})}return(0,s.useEffect)((()=>(document.addEventListener("keyup",o),()=>{document.removeEventListener("keyup",o)})),[]),(0,s.useEffect)((()=>{let e;return t.searchTerm.trim()?(a((e=>{e.show="loading"})),e=setTimeout((()=>{a((e=>{e.requestCount++}))}),1e3)):a((e=>{e.show="neither"})),()=>clearTimeout(e)}),[t.searchTerm]),(0,s.useEffect)((()=>{if(t.requestCount){const e=l.Z.CancelToken.source();try{(async()=>{const s=await l.Z.post("/search",{searchTerm:t.searchTerm},{CancelToken:e});s.data&&a((e=>{e.results=s.data}))})()}catch(e){console.log(e)}return a((e=>{e.show="results"})),()=>e.cancel()}}),[t.requestCount]),s.createElement(s.Fragment,null,s.createElement("div",{className:"search-overlay-top shadow-sm"},s.createElement("div",{className:"container container--narrow"},s.createElement("label",{htmlFor:"live-search-field",className:"search-overlay-icon"},s.createElement("i",{className:"fas fa-search"})),s.createElement("input",{onInput:function(e){const t=e.target.value;a((e=>{e.searchTerm=t}))},autoFocus:"",type:"text",autoComplete:"off",id:"live-search-field",className:"live-search-field",placeholder:"What are you interested in?"}),s.createElement("button",{onClick:()=>e({type:"triggerSearch",value:!1}),className:"close-live-search"},s.createElement("i",{className:"fas fa-times-circle"})))),s.createElement("div",{className:"search-overlay-bottom"},s.createElement("div",{className:"container container--narrow py-3"},s.createElement("div",{className:"circle-loader "+("loading"==t.show&&"circle-loader--visible")}),s.createElement("div",{className:"live-search-results "+("results"==t.show&&"live-search-results--visible")},s.createElement("div",{className:"list-group shadow-sm"},s.createElement("div",{className:"list-group-item active"},s.createElement("strong",null,"Search Results")," (",t.results.length," ",1==t.results.length?"item":"items"," found)"),t.results.map((t=>s.createElement(n.Z,{key:t._id,onClick:()=>e({type:"triggerSearch",value:!1}),post:t}))))))))}}}]);